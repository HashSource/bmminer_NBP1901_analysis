```c
void SetMinerTemperatureController(int minerID, uint temperatureIndex) {
  short tempValue;
  undefined4 temperatureControllerHandle;
  char *hardwareVersion;
  int hardwareVersionComparisonResult;
  uint numberOfTemperatureSensors;
  undefined4 shortTempValue;
  uint sensorIndex;
  uint actualSensorIndex;
  char logBuffer[2048];
  
  // Check for invalid miner ID or temperature index
  if (minerID == 0 || temperatureIndex > 3) {
    if (((loggingEnabledFlag != '\0') || (someGlobalFlag != '\0')) || (counterValue > 2)) {
      snprintf(logBuffer, 0x800, "%s: input bad param\n", functionName);
      LogError(3, logBuffer, 0);
    }
    return;
  }
  
  // Get the handle to the temperature controller
  temperatureControllerHandle = GetTemperatureControllerHandle();
  // Determine hardware version
  hardwareVersion = GetHardwareVersion();
  // Compare hardware version against known versions
  hardwareVersionComparisonResult = strcmp(hardwareVersion, "BHB28601");
  if (hardwareVersionComparisonResult != 0) {
    hardwareVersion = GetHardwareVersion();
    hardwareVersionComparisonResult = strcmp(hardwareVersion, "BHB28501");
    if (hardwareVersionComparisonResult != 0) {
      // Get number of temperature sensors based on unknown hardware version
      numberOfTemperatureSensors = GetNumberOfTempSensorsUnknownHW();
      goto SetupTemperatureSensors;
    }
  }
  // Get number of temperature sensors based on known hardware versions
  numberOfTemperatureSensors = GetNumberOfTempSensorsKnownHW();

SetupTemperatureSensors:
  if (numberOfTemperatureSensors > 0) {
    sensorIndex = 0;
    do {
      actualSensorIndex = sensorIndex & 0xff;
      sensorIndex += 1;
      // Read temperature value from sensor
      tempValue = ReadTemperatureSensor(temperatureIndex, actualSensorIndex);
      // Convert temperature value to appropriate format
      shortTempValue = FormatTemperatureValue((int)tempValue, (int)tempValue >> 0x1f);
      // Set the temperature on the controller
      SetTemperatureOnController(temperatureControllerHandle, shortTempValue);
    } while (numberOfTemperatureSensors != sensorIndex);
  }
  
  // Finally, update the temperature display on the miner
  UpdateMinerTemperatureDisplay(minerID, "temp_pic", temperatureControllerHandle);
  return;
}
```