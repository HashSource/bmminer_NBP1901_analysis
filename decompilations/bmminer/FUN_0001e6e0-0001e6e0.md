```c
int UpdateHashrate(uint hashrate)
{
  int returnValue;
  uint isInvalidHashrate;
  int hashRegisterOffset;
  
  // Check if the hashrate is within an accepted range or if it's the special termination value.
  isInvalidHashrate = hashrate >> 0x1f;
  if (MaxHashrateLimit <= (int)hashrate) {
    isInvalidHashrate = 1;
  }
  // If hashrate is valid, proceed with the operation
  if (isInvalidHashrate == 0) {
    // If the specific control flag is not set, call the related function with hashrate
    if (ControlFlag == 0) {
      returnValue = CalculateHashrate(hashrate);
      if (returnValue < 0) {
        return returnValue;
      }
    }
    else {
      returnValue = 0;
    }
    // Calculate the offset in the register for the current hashrate
    hashRegisterOffset = HashrateRegisterBase + hashrate * 0x210;
    // Increment the hashrate count for this offset
    *(int *)(hashRegisterOffset + 4) = *(int *)(hashRegisterOffset + 4) + 1;
    return returnValue;
  }
  // Returns an error code if the hashrate is invalid
  return -0x7ffffbff;
}
```