```c
int executeI2CCommand(uint deviceAddress, uint registerAddress, uint registerValue, int writeOperation, byte *readValue)
{
  uint response;
  int retryCount;
  int maxRetries;
  bool continueLoop;
  
  if (writeOperation == 0) { // Read operation
    retryCount = 0;
    maxRetries = 2;
    do {
      writeI2CDummy(deviceAddress, registerAddress); // Write dummy values
      sendI2CReadCommand(I2C_CMD, registerValue, 0, 0, deviceAddress, registerAddress); // Send read command
      usleep(1000); // Wait for 1ms
      response = readI2CResponse(deviceAddress, registerAddress); // Read response
      usleep(1000); // Wait for 1ms
      if ((response << 16) >> 24 == registerValue) {
        if (retryCount != 0) {
          return 0; // Successful read after retry
        }
        if ((response & 0xff) == 0) {
          return 0; // No error, successful read
        }
        *readValue = (byte)response; // Store the read value
        return 1; // Read completed
      }
      continueLoop = maxRetries != 1; // Check if more retries allowed
      retryCount = 1; // Update retry count
      maxRetries = retryCount; // Set max retries to the new count
    } while (continueLoop);
  }
  else { // Write operation
    maxRetries = 0;
    retryCount = 2;
    do {
      writeI2CDummy(deviceAddress, registerAddress); // Write dummy values
      sendI2CWriteCommand(I2C_CMD, registerValue, *readValue, 1, deviceAddress, registerAddress); // Send write command
      writeI2CDummy(deviceAddress, registerAddress); // Write dummy values
      usleep(1000); // Wait for 1ms
      writeI2CDummy(deviceAddress, registerAddress); // Write dummy values again
      sendI2CReadCommand(I2C_CMD, registerValue, 0, 0, deviceAddress, registerAddress); // Now send a read command
      response = readI2CResponse(deviceAddress, registerAddress); // Read response
      usleep(1000); // Wait for 1ms
      if (((response << 16) >> 24 == registerValue) || ((response & 0xff) == (uint)*readValue)) {
        if (maxRetries != 0) {
          return 0; // Successful write after retry
        }
        return writeOperation; // Return the write operation value
      }
      continueLoop = retryCount != 1; // Check if more retries allowed
      maxRetries = 1; // Update retry flag
      retryCount = maxRetries; // Set retry count to the new flag
    } while (continueLoop);
  }
  return 0; // Return failure if operation did not succeed in the retries
}
```