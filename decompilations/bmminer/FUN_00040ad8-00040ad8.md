```c
#include <unistd.h>  // for ssize_t
#include <pthread.h> // for pthread_mutex_lock, pthread_mutex_unlock

// Global pointer to the mutex for GPIO direction control
extern pthread_mutex_t *gpioDirectionMutex;
extern char s_failed_to_api_lock_00068ffc[];

// Strings for GPIO direction
extern char gpioDirectionOut[3]; // Assumed to defines "out" with null terminator
extern char gpioDirectionIn[2];  // Assumed to defines "in" with null terminator

// Change GPIO direction
// param_1 = GPIO number
// param_2 = Direction (1 for output, 0 for input)
// Returns 0 on success, negative error code on failure
int setGpioDirection(int gpioNumber, int direction) {
  int mutexLockResult;
  ssize_t writeResult;
  int fileDescriptor;
  char *directionStr;
  char gpioPath[64];
  
  // Lock the mutex before accessing the GPIO
  mutexLockResult = pthread_mutex_lock(gpioDirectionMutex);
  if (mutexLockResult == 0) {
    // Format the path to the GPIO direction control file
    snprintf(gpioPath, sizeof(gpioPath), "/sys/class/gpio/gpio%d/direction", gpioNumber);
    // Open the direction control file as write-only
    fileDescriptor = open(gpioPath, O_WRONLY);
    if (fileDescriptor < 0) {
      char errorMessage[2048];
      // Couldn't open the file, log an error
      snprintf(errorMessage, sizeof(errorMessage),
               "Failed to open gpio %d direction for writing!\n",
               gpioNumber);
      logError(errorMessage);  // Custom logging function, replaces FUN_0002e584
      pthread_mutex_unlock(gpioDirectionMutex);
      return -2;
    } else {
      // Prepare to write the direction to the file: "in" or "out"
      char *directionValue = direction == 0 ? gpioDirectionIn : gpioDirectionOut;
      size_t directionLength = direction == 0 ? sizeof(gpioDirectionIn) : sizeof(gpioDirectionOut);
      writeResult = write(fileDescriptor, directionValue, directionLength);
      if (writeResult < 0) {
        // Writing failed, log an error
        char errorMessage[2048];
        snprintf(errorMessage, sizeof(errorMessage),
                 "Failed to set gpio %d direction %s !\n",
                 gpioNumber, directionValue);
        logError(errorMessage);  // Custom logging function, replaces FUN_0002e584
        close(fileDescriptor);
        pthread_mutex_unlock(gpioDirectionMutex);
        return -3;
      } else {
        // Successfully changed the GPIO direction
        close(fileDescriptor);
        pthread_mutex_unlock(gpioDirectionMutex);
        return 0;
      }
    }
  } else {
    // Failed to lock the mutex to access the GPIO
    char errorMessage[2048];
    snprintf(errorMessage, sizeof(errorMessage), "%s", s_failed_to_api_lock_00068ffc);
    logError(errorMessage);  // Custom logging function, replaces FUN_0002e584
    return -1;
  }
}
```