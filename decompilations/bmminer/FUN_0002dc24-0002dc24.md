```c
void AddItemToTailOfList(int *listHeadPtr, int *newItemPtr, undefined4 callerName,
                         undefined4 callerFunction, undefined4 callerLine) {
  int tailItem;
  char errorMessage[2052];
  
  // If list type doesn't match the item type
  if (listHeadPtr[0] != newItemPtr[0]) {
    snprintf(errorMessage, sizeof(errorMessage),
             "List %d can't add() a %d item - called from %s %s() line %d in file %s %s():%d",
             listHeadPtr[0], newItemPtr[0], callerName, callerFunction, callerLine,
             "klist.c", "AddItemToTailOfList", 0xec);
    LogError(3, errorMessage, 1);
    ExitProcess(1);
  }
  
  // If the do_tail flag in the list is not true
  if (listHeadPtr[11] == 0) {
    snprintf(errorMessage, sizeof(errorMessage),
             "List %d can't add() - do_tail flag is false - called from %s %s() line %d in file %s %s():%d",
             listHeadPtr[0], "AddItemToTailOfList", callerName, callerFunction, callerLine,
             "klist.c", "AddItemToTailOfList", 0xf1);
    LogError(3, errorMessage, 1);
    ExitProcess(1);
  }

  // Get current tail item from the list structure
  tailItem = listHeadPtr[4];
  
  // Set the previous item for the new item to the current tail
  newItemPtr[1] = tailItem;
  // Set the next item for the new item to NULL (end of the list)
  newItemPtr[2] = 0;
  
  // If there is already a tail item, set its next item to the new item
  if (tailItem != 0) {
    *((int **)(tailItem + 8)) = newItemPtr;
  }
  
  // Update the tail of the list to the new item
  listHeadPtr[4] = (int)newItemPtr;
  
  // If there is no head item (list is empty), set the new item as the head
  if (listHeadPtr[3] == 0) {
    listHeadPtr[3] = (int)newItemPtr;
  }
  
  // Increase the count of items and the versioning for list changes
  listHeadPtr[7] += 1;
  listHeadPtr[8] += 1;
  return;
}
```