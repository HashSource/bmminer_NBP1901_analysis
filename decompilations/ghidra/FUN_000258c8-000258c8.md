```c
int GetPrimaryIpAddress(char *outIpAddress)
{
  int socketFd;
  int result;
  int ioctlResult;
  char *ipAddressStr;
  undefined *interfacePtr;
  uint interfaceIndex;
  bool hasMoreInterfaces;
  uint interfaceCount;
  undefined ifaceBuffer[512];
  
  socketFd = socket(AF_INET, SOCK_DGRAM, 0); // Create a socket for IPv4 and UDP.
  
  if (socketFd < 0) {
    result = -1;
  }
  else {
    interfaceCount = 512;
    interfacePtr = ifaceBuffer;
    ioctlResult = ioctl(socketFd, SIOCGIFCONF, &interfaceCount); // Get the list of interfaces.
    
    if (ioctlResult == 0) {
      result = -1;
      interfaceIndex = interfaceCount >> 5; // Calculate the number of interfaces.
      interfacePtr = ifaceBuffer + (interfaceIndex - 1) * 32; // Set pointer to the last interface.
      
      while (hasMoreInterfaces = interfaceIndex != 0, interfaceIndex = interfaceIndex - 1, hasMoreInterfaces) {
        ioctlResult = ioctl(socketFd, SIOCGIFADDR, interfacePtr); // Get the IP address of the interface.
        
        if ((ioctlResult == 0) &&
           (ipAddressStr = inet_ntoa(((struct sockaddr_in *)interfacePtr)->sin_addr), ipAddressStr != NULL)) {
          strcpy(outIpAddress, ipAddressStr); // Copy the IP address to the output.
          
          // Check if the retrieved IP is not the localhost IP.
          result = strcmp("127.0.0.1", outIpAddress);
          if (result != 0) {
            result = 0; // Success.
            break;
          }
        }
        interfacePtr = interfacePtr - 32; // Move to the next interface structure.
      }
    }
    else {
      result = -1; // ioctl failed.
    }
    close(socketFd); // Close the socket.
  }
  
  return result; // Return result of operation.
}
```