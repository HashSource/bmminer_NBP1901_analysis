```c
uint calculateHashRate(int baseOffset)
{
  int hashBoardIndex;
  uint accumulatedHashRate;
  int hashBoardIsValid;
  int hashCountPerBoard;
  int hashValueIndex;
  uint hashRate;
  int *hashValuePtr;
  int hashCountForBoard;
  
  accumulatedHashRate = 0; // Initialize the accumulated hash rate
  hashBoardIndex = 0; // Start with the first hash board index
  do {
    hashBoardIsValid = checkBoardIsValid(hashBoardIndex); // Check if the hash board is valid
    if ((hashBoardIsValid != 0) && (hashCountPerBoard = getHashCount(), hashCountPerBoard != 0)) {
      hashValuePtr = (int *)(baseOffset - 4 + hashBoardIndex * 0x400); // Calculate the address of hash values for the board
      hashValueIndex = 0; // Start with the first hash value index
      do {
        hashValuePtr = hashValuePtr + 1; // Move to the next hash value
        hashCountForBoard = *hashValuePtr; // Get the hash count
        hashValueIndex = hashValueIndex + 1; // Increment the hash value index
        hashRate = getHashRateMultiplier(); // Get hash rate multiplier
        accumulatedHashRate = hashCountForBoard * hashRate + accumulatedHashRate; // Add to the accumulated hash rate
      } while (hashCountPerBoard != hashValueIndex); // Continue until all hash values for the board are processed
    }
    hashBoardIndex = hashBoardIndex + 1; // Move to the next hash board
  } while (hashBoardIndex != 4); // There are 4 hash boards to process in total
  return accumulatedHashRate / 1000; // Return the total hash rate divided by 1000
}
```

Comments have been added to explain the purpose of each variable and the flow of the function. The function seems to calculate the total hash rate from an array of hash values from 4 different hash boards of a mining device.