```c
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void CheckAndHandleNetworkConnection(void)
{
  int elapsedTimeSeconds;
  uint currentTimeSeed;
  long randomValue;
  int lastTimeDifference;
  uint currentRandomValue;
  undefined4 errorLogTemplate;
  undefined4 stackLogBuffer1;
  undefined4 stackLogBuffer2;
  undefined4 stackLogBuffer3;
  undefined4 stackLogBuffer4;
  undefined4 stackLogBuffer5;
  undefined4 stackLogBuffer6;
  undefined4 stackLogBuffer7;
  undefined4 stackLogBuffer8;
  undefined2 stackLogBuffer9;
  undefined stackLogBufferLast;

  // Obtain the current time in an unknown format
  ObtainCurrentTime(&elapsedTimeSeconds);
  
  // Check if the global network connection timers are zero
  if (_NetworkConnectionTimer1 == 0 && _NetworkConnectionTimer2 == 0) {
    ObtainCurrentTime();
    return;
  }
  
  // Calculate the elapsed time since the timers were set
  elapsedTimeSeconds = elapsedTimeSeconds - _NetworkConnectionTimer1;
  if ((int)(currentRandomValue - _NetworkConnectionTimer2) < 0) {
    elapsedTimeSeconds = elapsedTimeSeconds - 1;
  }

  // If the elapsed time is less than 5 minutes (300 seconds)
  if (elapsedTimeSeconds < 300) {
    if (_NetworkResumeFlag != 0) {
      if (LogLevel_Debug < _LogLevel) {
        // If a network connection resume event is detected, log the message
        CopyNetworkResumeLogMessage(&errorLogTemplate);
        LogDebugMessage(3, &errorLogTemplate, 0);
      }
      LogWarningMessage(6, "Network connection resume, restarting...");
      _NetworkResumeFlag = 0;
      _NetworkLostFlag = 0;
      return;
    }
    if (_NetworkLostFlag != 0) {
      if (LogLevel_Debug < _LogLevel) {
        CopyNetworkLostLogMessage(&errorLogTemplate);
        LogDebugMessage(3, &errorLogTemplate, 0);
      }
      int logCode = LogCriticalMessage();
      LogWarningMessage(logCode, 0);
      _NetworkLostFlag = 0;
      return;
    }
  }
  // If the timer has exceeded 5 minutes
  else if (_NetworkLostFlag == 0) {
    LogWarningMessage(3, "Network connection lost");
    currentTimeSeed = GetRandomSeed();

    // Ensure the seed for random number generation is not zero
    if (currentTimeSeed == 0) {
      currentTimeSeed = currentRandomValue;
    }

    // Set the seed and obtain a random value
    SetRandomSeed(currentTimeSeed);
    randomValue = GetRandomValue();
    _NetworkLostFlag = randomValue % 300 + 1; // Flag set to a random value between 1 to 300
    
    if (LogLevel_Debug < _LogLevel) {
      FormatDebugMessageWithInt("Will power off in %d seconds if not resumed", &errorLogTemplate, 0x800);
      LogDebugMessage(3, &errorLogTemplate, 0);
    }
  }
  else if ((elapsedTimeSeconds >= (_NetworkLostFlag + 299)) && (_NetworkResumeFlag == 0)) {
    if (LogLevel_Debug < _LogLevel) {
      FormatDebugMessage("Network connection lost for 5 minutes +%d seconds, powering off...", &errorLogTemplate, 0x800);
      LogDebugMessage(3, &errorLogTemplate, 0);
    }

    // Trigger some kind of power off routine
    TriggerPowerOffRoutine();
    _NetworkResumeFlag = 1;
  }
  return;
}
```