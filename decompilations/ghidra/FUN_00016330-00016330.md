```c
void SetFanSpeedForAllFans(undefined4 fanSpeed)
{
  int currentFanIndex;
  int isFanActive;
  
  currentFanIndex = 0;
  isFanActive = CheckFanStatus(0); // Check if the first fan is active
  while(true) {
    if (isFanActive != 0) {
      SetFanSpeed(currentFanIndex, fanSpeed); // Set the fan speed if the fan is active
    }
    currentFanIndex += 1;
    if (currentFanIndex == 4) break; // There are only 4 fans, so break after the last one
    isFanActive = CheckFanStatus(currentFanIndex); // Check if the next fan is active
  }
  return;
}
```