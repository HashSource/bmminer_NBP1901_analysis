```c
int __fastcall allocateKListItems(const char **listName, const char *fileName, const char *functionName, int lineNumber)
{
  int result; // r0
  const char *currentItemCount; // r3
  const char *headItem; // r2
  signed int itemsToAllocate; // r6
  char *allocatedItemsArray; // r0
  const char *updatedItemCount; // r1
  const char *reallocatedArray; // r0
  char *newItemsArray; // r5
  const char *updateHeadItem; // r3
  const char *listNameCopy; // r1
  __int64 itemInitializationInfo; // r2
  int listEndIndicator; // r0
  int lastItemOffset; // r3
  int calculateOffset; // r2
  char *lastItemPointer; // r3
  char *itemPointer; // r0
  const char *incrementDataMemorySize; // r1
  const char *newDataMemoryArray; // r0
  char logBuffer[2072]; // [sp+20h] [bp-818h] BYREF

  result = *((unsigned __int8 *)listName + 4);
  if ( result )
  {
    snprintf(
      logBuffer,
      0x800u,
      "List %s store can't %s() - from %s %s() line %d in %s %s():%d",
      *listName,
      "k_alloc_items",
      fileName,
      functionName,
      lineNumber,
      "klist.c",
      "k_alloc_items",
      19);
    logMessage(3, logBuffer, 1);
    result = nullsub_1(1);
  }
  currentItemCount = listName[10];
  if ( (int)currentItemCount <= 0 )
  {
    itemsToAllocate = (signed int)listName[9];
  }
  else
  {
    headItem = listName[6];
    if ( (int)currentItemCount <= (int)headItem )
      return result;
    itemsToAllocate = (signed int)listName[9];
    if ( (int)currentItemCount < (int)&headItem[itemsToAllocate] )
      itemsToAllocate = currentItemCount - headItem;
  }
  allocatedItemsArray = (char *)listName[13];
  updatedItemCount = listName[12] + 1;
  listName[12] = updatedItemCount;
  reallocatedArray = (const char *)realloc(allocatedItemsArray, 4 * (_DWORD)updatedItemCount);
  listName[13] = reallocatedArray;
  if ( !reallocatedArray )
  {
    snprintf(
      logBuffer,
      0x800u,
      "List %s item_memory failed to realloc count=%d in %s %s():%d",
      *listName,
      listName[12],
      "klist.c",
      "k_alloc_items",
      33);
    logMessage(3, logBuffer, 1);
    nullsub_1(1);
  }
  newItemsArray = (char *)calloc(itemsToAllocate, 0x10u);
  if ( !newItemsArray )
  {
    snprintf(
      logBuffer,
      0x800u,
      "List %s failed to calloc %d new items - total was %d, limit was %d in %s %s():%d",
      *listName,
      itemsToAllocate,
      listName[6],
      listName[10],
      "klist.c",
      "k_alloc_items",
      38);
    logMessage(3, logBuffer, 1);
    nullsub_1(1);
  }
  *(_DWORD *)&listName[13][4 * (_DWORD)(listName[12] + 0x3FFFFFFF)] = newItemsArray;
  updateHeadItem = listName[6];
  listNameCopy = *listName;
  listName[7] = (const char *)itemsToAllocate;
  listName[8] = (const char *)itemsToAllocate;
  listName[6] = &updateHeadItem[itemsToAllocate];
  *(_DWORD *)newItemsArray = listNameCopy;
  *((_DWORD *)newItemsArray + 1) = 0;
  *((_DWORD *)newItemsArray + 2) = newItemsArray + 16;
  if ( itemsToAllocate > 2 )
  {
    HIDWORD(itemInitializationInfo) = newItemsArray + 32;
    do
    {
      LODWORD(itemInitializationInfo) = HIDWORD(itemInitializationInfo) - 32;
      *(_DWORD *)(HIDWORD(itemInitializationInfo) - 16) = listNameCopy;
      *(_QWORD *)(HIDWORD(itemInitializationInfo) - 12) = itemInitializationInfo;
      HIDWORD(itemInitializationInfo) += 16;
    }
    while ( (char *)HIDWORD(itemInitializationInfo) != &newItemsArray[16 * itemsToAllocate] );
  }
  listEndIndicator = *((unsigned __int8 *)listName + 44);
  lastItemOffset = 16 * (itemsToAllocate + 0xFFFFFFF);
  *(_DWORD *)&newItemsArray[lastItemOffset] = listNameCopy;
  listName[3] = newItemsArray;
  calculateOffset = lastItemOffset - 16;
  lastItemPointer = &newItemsArray[lastItemOffset];
  *((_DWORD *)lastItemPointer + 1) = &newItemsArray[calculateOffset];
  *((_DWORD *)lastItemPointer + 2) = 0;
  if ( listEndIndicator )
    listName[4] = lastItemPointer;
  do
  {
    itemPointer = (char *)listName[15];
    incrementDataMemorySize = listName[14] + 1;
    listName[14] = incrementDataMemorySize;
    newDataMemoryArray = (const char *)realloc(itemPointer, 4 * (_DWORD)incrementDataMemorySize);
    listName[15] = newDataMemoryArray;
    if ( !newDataMemoryArray )
    {
      snprintf(
        logBuffer,
        0x800u,
        "List %s data_memory failed to realloc count=%d in %s %s():%d",
        *listName,
        listName[14],
        "klist.c",
        "k_alloc_items",
        69);
      logMessage(3, logBuffer, 1);
      nullsub_1(1);
    }
    result = (int)calloc(1u, (size_t)listName[5]);
    *((_DWORD *)newItemsArray + 3) = result;
    if ( !result )
    {
      snprintf(logBuffer, 0x800u, "List %s failed to calloc item data in %s %s():%d", *listName, "klist.c", "k_alloc_items", 73);
      logMessage(3, logBuffer, 1);
      nullsub_1(1);
      result = *((_DWORD *)newItemsArray + 3);
    }
    *(_DWORD *)&listName[15][4 * (_DWORD)(listName[14] + 0x3FFFFFFF)] = result;
    newItemsArray = (char *)*((_DWORD *)newItemsArray + 2);
  }
  while ( newItemsArray );
  return result;
}
```