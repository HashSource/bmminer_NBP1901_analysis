```c
int MonitorFrequencyStability()
{
  int elapsedSeconds; // r4
  int stableFrequency; // r5
  int lastResult; // r0
  int frequencyDifference; // r3
  int currentFrequency; // r5
  int currentResult; // r0
  int currentDifference; // r3
  char logBuffer[2064]; // [sp+8h] [bp-810h] BYREF

  elapsedSeconds = 1;
  sleep(1u);
  do
  {
    do
    {
      ++elapsedSeconds;
      sleep(1u);
    }
    while ( elapsedSeconds <= 29 );
    stableFrequency = GetStableFrequencyValue();
    lastResult = GetCurrentFrequencyValue();
    frequencyDifference = stableFrequency - lastResult;
    if ( stableFrequency - lastResult < 0 )
      frequencyDifference = lastResult - stableFrequency;
  }
  while ( frequencyDifference > 5 && elapsedSeconds != 180 );
  if ( (unsigned int)globalLogLevel > 3 )
  {
    currentFrequency = GetStableFrequencyValue();
    currentResult = GetCurrentFrequencyValue();
    currentDifference = currentFrequency - currentResult;
    if ( currentFrequency - currentResult < 0 )
      currentDifference = currentResult - currentFrequency;
    snprintf(logBuffer, 0x800u, "Slept %d seconds, diff = %d.\n", elapsedSeconds, currentDifference);
    return LogDebugMessage(3, logBuffer, 0);
  }
  return lastResult;
}
```